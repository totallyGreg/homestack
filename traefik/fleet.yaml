defaultNamespace: traefik-v2
helm:
  releaseName: traefik
  chart: traefik
  repo: https://helm.traefik.io/traefik
  version: "9.11.0"
  values:

    # Create an IngressRoute for the dashboard
    ingressRoute:
      dashboard:
        enabled: true
    # Use ingressClass. Ignored if Traefik version < 2.3 / kubernetes < 1.18.x
    ingressClass:
      # true is not unit-testable yet, pending https://github.com/rancher/helm-unittest/pull/12
      enabled: true
      isDefaultClass: true

    globalArguments:
      - "--global.checknewversion"
      - "--global.sendanonymoususage"

    #
    # Configure Traefik static configuration
    # Additional arguments to be passed at Traefik's binary
    # All available options available on https://docs.traefik.io/reference/static-configuration/cli/
    ## Use curly braces to pass values: `helm install --set="additionalArguments={--providers.kubernetesingress.ingressclass=traefik-internal,--log.level=DEBUG}"`
    additionalArguments:
      - "--accessLog=true"
      - "--api.dashboard=true"
      - "--api.insecure=true"
      - "--entrypoints.plex.Address=:32400"
      - "--entrypoints.plex.Address=:32400/udp"
      - "--entrypoints.plex.http.tls=true"
      - "--entrypoints.websecure.http.tls=true"
      - "--log.level=info"
      - "--metrics"
      - "--metrics.prometheus"
      - "--metrics.prometheus.addEntryPointsLabels=true"
      - "--providers.kubernetescrd"
      - "--providers.kubernetesIngress=true"
      - "--providers.kubernetesIngress.ingressClass=traefik"
      # - "--providers.kubernetesIngress.ingressClass=traefik-cert-manager"
      # - "--providers.kubernetesingress.ingressendpoint.hostname=rancher.home.falcone.us"
      # - --providers.kubernetesingress.certauthfilepath=/my/ca.crt
      - "--certificatesresolvers.le.acme.tlschallenge"
      - "--certificatesresolvers.le.acme.email=totallyGreg@gmail.com"
      - "--certificatesresolvers.le.acme.storage=acme.json"
      - "--certificatesresolvers.lestage.acme.tlschallenge"
      - "--certificatesresolvers.lestage.acme.email=totallyGreg@gmail.com"
      - "--certificatesresolvers.lestage.acme.storage=acme.json"
      - "--certificatesresolvers.lestage.acme.caserver=https://acme-staging-v02.api.letsencrypt.org/directory"
    #  - "--providers.kubernetesingress.ingressclass=traefik-internal"
    #  - "--log.level=DEBUG"
    service:
      enabled: true
      type: LoadBalancer
      # Additional annotations (e.g. for cloud provider specific config)
      annotations: {}
      # Additional service labels (e.g. for filtering Service by custom labels)
      labels: {}
      # Additional entries here will be added to the service spec. Cannot contains
      # type, selector or ports entries.
      spec: #{}
        # externalTrafficPolicy: Cluster
        loadBalancerIP: "10.0.1.240"
        # clusterIP: "2.3.4.5"
      loadBalancerSourceRanges: []
        # - 192.168.0.1/32
        # - 172.16.0.0/16
      externalIPs: []
        # - 1.2.3.4
